<mat-toolbar class="mat-elevation-z1" color="primary">
  <mat-toolbar-row id="toolbar-main">
    <b>Factorio Planner</b>
    <span class="flex-grow"></span>
    <button (click)="switchTheme()" matTooltip="Toggle dark mode" mat-icon-button>
      <i-moon *ngIf="!darkTheme"></i-moon>
      <i-sun *ngIf="darkTheme"></i-sun>
    </button>
    <button (click)="showChangelog()" mat-icon-button>
      <i-info matTooltip="About"></i-info>
    </button>
  </mat-toolbar-row>
  <mat-toolbar-row id="toolbar-tabs">
    <ng-container *ngFor="let tab of tabs; index as i; trackBy:trackByTabButton">
      <span class="wrapper-button-tab" *ngIf="tab != null" @tabButton>
        <span class="tab inverted-border" [class.selected]="i == activeTabId" matRipple matRippleColor="rgba(0,0,0,.12)">
          <span class="clickable" (click)="activeTabId = i">{{tabs[i]}}</span>
          <i-x-circle class="clickable" (click)="tabs[i] = null; selectPreviousTab()">close</i-x-circle>
        </span>
      </span>
    </ng-container>
    <button (click)="onClick_addTabButton()" mat-icon-button>
      <i-plus></i-plus>
    </button>
  </mat-toolbar-row>
</mat-toolbar>
<div id="wrapper-page" class="gpu-layer">
  <div class="vertical-spacer">

    <div>
      <span id="button-support" (click)="openDialogSupport()">
        Support the project!
      </span>
    </div>

    <div id="wrapper-tips" class="gpu-layer" [@tips]="showTips ? 'visible' : 'hidden'">
      <div id="tips" class="container-secondary">
        <button mat-icon-button (click)="showTips = !showTips">
          <i-x-circle>close</i-x-circle>
        </button>
        <div>Tips:</div>
        <ul>
          <li>Select at any time a factorio version which includes marathon (expensive) recipes.</li>
          <li>Click on an assembling machine to see other assembling machines available for this recipe.</li>
          <li>Click on a node to minize it.</li>
          <li>'Resource Overview' shows the total ressources needed.</li>
        </ul>
        <div>Report bugs at ngnsup+factorio.planner@gmail.com</div>
      </div>
    </div>
    <ng-container *ngFor="let tab of tabs; index as i; trackBy:trackByTabButton">
      <app-tab *ngIf="tab != null" [hidden]="activeTabId !== i"></app-tab>
    </ng-container>
  </div>
</div>